<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="./../../xmlrpc.php">

<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

	<!-- This site is optimized with the Yoast SEO plugin v23.8 - https://yoast.com/wordpress/plugins/seo/ -->
	<title>Saga Archives - Simple Oriented Architecture</title>
	<link rel="canonical" href="./index.html">
	<meta property="og:locale" content="en_US">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Saga Archives - Simple Oriented Architecture">
	<meta property="og:url" content="./index.html">
	<meta property="og:site_name" content="Simple Oriented Architecture">
	<meta name="twitter:card" content="summary_large_image">
	<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"CollectionPage","@id":".//tag/saga/","url":".//tag/saga/","name":"Saga Archives - Simple Oriented Architecture","isPartOf":{"@id":".//#website"},"breadcrumb":{"@id":".//tag/saga/#breadcrumb"},"inLanguage":"en-US"},{"@type":"BreadcrumbList","@id":".//tag/saga/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":".//"},{"@type":"ListItem","position":2,"name":"Saga"}]},{"@type":"WebSite","@id":".//#website","url":".//","name":"Simple Oriented Architecture","description":"","publisher":{"@id":".//#/schema/person/14f18e400f12db819869e684790bbf7e"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":".//?s={search_term_string}"},"query-input":{"@type":"PropertyValueSpecification","valueRequired":true,"valueName":"search_term_string"}}],"inLanguage":"en-US"},{"@type":["Person","Organization"],"@id":".//#/schema/person/14f18e400f12db819869e684790bbf7e","name":"Victor Chircu","image":{"@type":"ImageObject","inLanguage":"en-US","@id":".//#/schema/person/image/","url":"https://secure.gravatar.com/avatar/331148ee28fef6336a73beb488fc0bdc?s=96&d=mm&r=g","contentUrl":"https://secure.gravatar.com/avatar/331148ee28fef6336a73beb488fc0bdc?s=96&d=mm&r=g","caption":"Victor Chircu"},"logo":{"@id":".//#/schema/person/image/"},"description":"I'm a software architect and continuous learner. I like solving real, challenging problems and sharing experiences with other people.","sameAs":[".//","https://www.linkedin.com/in/victor-chircu-1519a331","https://x.com/https://twitter.com/victorchircu/"]}]}</script>
	<!-- / Yoast SEO plugin. -->


<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//stats.wp.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//v0.wordpress.com">
<link rel="dns-prefetch" href="//i0.wp.com">
<link rel="alternate" type="application/rss+xml" title="Simple Oriented Architecture &raquo; Feed" href="./../../feed/index.html">
<link rel="alternate" type="application/rss+xml" title="Simple Oriented Architecture &raquo; Comments Feed" href="./../../comments/feed/index.html">
<link rel="alternate" type="application/rss+xml" title="Simple Oriented Architecture &raquo; Saga Tag Feed" href="./feed/index.html">
<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/svg\/","svgExt":".svg","source":{"concatemoji":".\/\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.6.2"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"🏳️‍⚧️","🏳️​⚧️")?!1:!n(e,"🇺🇳","🇺​🇳")&&!n(e,"🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴​󠁧​󠁢​󠁥​󠁮​󠁧​󠁿");case"emoji":return!n(e,"🐦‍⬛","🐦​⬛")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<style id="wp-emoji-styles-inline-css" type="text/css">img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}</style>
<link rel="stylesheet" id="wp-block-library-css" href="./../../wp-includes/css/dist/block-library/style.min.css?ver=6.6.2" type="text/css" media="all">
<link rel="stylesheet" id="mediaelement-css" href="./../../wp-includes/js/mediaelement/mediaelementplayer-legacy.min.css?ver=4.2.17" type="text/css" media="all">
<link rel="stylesheet" id="wp-mediaelement-css" href="./../../wp-includes/js/mediaelement/wp-mediaelement.min.css?ver=6.6.2" type="text/css" media="all">
<style id="jetpack-sharing-buttons-style-inline-css" type="text/css">.jetpack-sharing-buttons__services-list{display:flex;flex-direction:row;flex-wrap:wrap;gap:0;list-style-type:none;margin:5px;padding:0}.jetpack-sharing-buttons__services-list.has-small-icon-size{font-size:12px}.jetpack-sharing-buttons__services-list.has-normal-icon-size{font-size:16px}.jetpack-sharing-buttons__services-list.has-large-icon-size{font-size:24px}.jetpack-sharing-buttons__services-list.has-huge-icon-size{font-size:36px}@media print{.jetpack-sharing-buttons__services-list{display:none!important}}.editor-styles-wrapper .wp-block-jetpack-sharing-buttons{gap:0;padding-inline-start:0}ul.jetpack-sharing-buttons__services-list.has-background{padding:1.25em 2.375em}</style>
<style id="classic-theme-styles-inline-css" type="text/css">/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}</style>
<style id="global-styles-inline-css" type="text/css">:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="bulan-plugins-style-css" href="./../../wp-content/themes/bulan/assets/css/plugins.min.css?ver=6.6.2" type="text/css" media="all">
<link rel="stylesheet" id="bulan-fonts-css" href="https://fonts.googleapis.com/css?family=Crimson+Text%3A400%2C700%2C400italic%257COswald%3A400%2C700%2C300&#038;subset=latin%2Clatin-ext&#038;ver=6.6.2" type="text/css" media="all">
<link rel="stylesheet" id="bulan-style-css" href="./../../wp-content/themes/bulan/style.min.css?ver=6.6.2" type="text/css" media="all">
<link rel="stylesheet" id="eu-cookie-law-style-css" href="./../../wp-content/plugins/jetpack/modules/widgets/eu-cookie-law/style.css?ver=14.0" type="text/css" media="all">
<link rel="stylesheet" id="sharedaddy-css" href="./../../wp-content/plugins/jetpack/modules/sharedaddy/sharing.css?ver=14.0" type="text/css" media="all">
<link rel="stylesheet" id="social-logos-css" href="./../../wp-content/plugins/jetpack/_inc/social-logos/social-logos.min.css?ver=14.0" type="text/css" media="all">
<script type="text/javascript" src="./../../wp-includes/js/jquery/jquery.min.js?ver=3.7.1" id="jquery-core-js"></script>
<script type="text/javascript" src="./../../wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.1" id="jquery-migrate-js"></script>
<!--[if lte IE 9]>
<script type="text/javascript" src=".//wp-content/themes/bulan/assets/js/html5shiv.min.js" id="standard-html5-js"></script>
<![endif]-->
<link rel="https://api.w.org/" href="./../../wp-json/index.html">
<link rel="alternate" title="JSON" type="application/json" href="./../../wp-json/wp/v2/tags/45/index.html">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="./../../xmlrpc.php?rsd">
<meta name="generator" content="WordPress 6.6.2">
	<style>img#wpstats{display:none}</style>
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>

<body class="archive tag tag-saga tag-45 no-custom-header layout-2c-l" itemscope itemtype="http://schema.org/Blog">

<div id="page" class="site">

	<div class="search-area">
		<div class="wide-container">
			<form role="search" method="get" class="searchform" action=".//">
	<div>
		<input type="search" class="search-field field" placeholder="Press enter to search &hellip;" value="" name="s" title="Search for:">
	</div>
</form>
		</div>
	</div>

	
	<header id="masthead" class="site-header" itemscope="itemscope" itemtype="http://schema.org/WPHeader">

		<div class="site-branding">
			<div class="wide-container">
				<div id="logo">
<h1 class="site-title" itemprop="headline"><a href="./../../index.html" itemprop="url" rel="home"><span itemprop="headline">Simple Oriented Architecture</span></a></h1>
</div>
			</div>
		</div>

	</header><!-- #masthead -->

	<div id="content" class="site-content">
		<div class="wide-container">

	<section id="primary" class="content-area">
		<main id="main" class="site-main">

			
				<header class="page-header">
					<h1 class="page-title">Saga</h1>				</header><!-- .page-header -->

								
					<article id="post-1116" class="post-1116 post type-post status-publish format-standard hentry category-architecture category-nservicebus tag-dead-letter-channel tag-idempotent-receiver tag-integration tag-long-running-process tag-messaging tag-microservices tag-nservicebus tag-retries tag-saga tag-soa no-post-thumbnail no-read-more-tag no-sticky entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<header class="entry-header">

								<span class="cat-links" itemprop="articleSection">
				<a href="./../../category/architecture/index.html" rel="category tag">Architecture</a>, <a href="./../../category/nservicebus/index.html" rel="category tag">NServiceBus</a>			</span>
					
		<h2 class="entry-title" itemprop="headline"><a href="./../../handling-failure-in-long-running-processes/index.html" rel="bookmark" itemprop="url">Handling Failure in Long Running Processes</a></h2>
	</header>

	
			<div class="entry-content" itemprop="articleBody">
			
<p>In the previous posts in this series, we’ve seen <a href="./../../what-are-long-running-processes/index.html">some examples of long running processes</a>, <a href="./../../modelling-long-running-processes-choreography-versus-orchestration/index.html">how to model</a> them and where to <a rel="noreferrer noopener" aria-label="store the state (opens in a new tab)" href="./../../storing-the-state-of-a-long-running-process/index.html" target="_blank">store the state</a>. But building distributed systems is hard. And if we are aware of the <a rel="noreferrer noopener" aria-label="fallacies of distributed systems (opens in a new tab)" href="./../../8-fallacies-of-distributed-systems/index.html" target="_blank">fallacies of distributed systems</a>, then we know that things fail all the time. So how can we ensure that our long running process doesn&#8217;t get into an inconsistent state if something fails along the way? </p>



<p>Let&#8217;s see some strategies for dealing with failure in the Shipping service. First, let&#8217;s have another looks at the shipping policy defined in the <a rel="noreferrer noopener" aria-label="previous post (opens in a new tab)" href="./../../storing-the-state-of-a-long-running-process/index.html" target="_blank">previous post</a>:</p>



<ul class="wp-block-list">
<li>First, attempt to ship with Fan Courier.</li>
<li>If cannot ship with Fan Courier, attempt to ship with Urgent Cargus.</li>
<li>If we did not receive a response from Fan Courier within the agreed SLA, cancel the Fan Courier shipment and attempt to ship with Urgent Cargus.</li>
<li>If we cannot ship with Urgent Cargus or did not receive a response within the agreed SLA, notify the IT department.</li>
</ul>



<h2 class="wp-block-heading">Retries</h2>



<p>The <strong>Fan Courier Gateway</strong> handles the <strong>ShipWithFanCourierRequest </strong>message and calls the <strong>Fan Courier HTTP API</strong>. What happens if we get an Internal Server Error? </p>



<figure class="wp-block-image"><img fetchpriority="high" decoding="async" width="1902" height="503" src="https://i2.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Retries1.png?fit=628%2C308&amp;ssl=1" alt="Fan Courier HTTP API fails" class="wp-image-1118" srcset="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Retries1.png?w=1902&amp;ssl=1 1902w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Retries1.png?resize=768%2C203&amp;ssl=1 768w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Retries1.png?w=1256&amp;ssl=1 1256w" sizes="(max-width: 628px) 100vw, 628px"></figure>



<p>The simplest thing we could do would be to retry. What if it still fails? Then we can wait a bit, then retry again. For example, we can retry after 10 seconds. If it still fails, retry after 20 and so on. These <a rel="noreferrer noopener" href="https://docs.particular.net/nservicebus/recoverability/#delayed-retries" target="_blank">Delayed Retries</a> are a very useful strategy for getting over <a rel="noreferrer noopener" aria-label="transient errors (opens in a new tab)" href="https://docs.particular.net/tutorials/nservicebus-step-by-step/5-retrying-errors/#causes-of-errors-transient-exceptions" target="_blank">transient errors</a> (like a deadlock in the database). We could even increase the time between retries exponentially, using an <a href="https://en.wikipedia.org/wiki/Exponential_backoff">exponential backoff</a> strategy.</p>



<h3 class="wp-block-heading">Idempotent Receiver</h3>



<p>One thing that you need to be mindful when retrying is message <a rel="noreferrer noopener" aria-label="idempotency (opens in a new tab)" href="https://en.wikipedia.org/wiki/Idempotence" target="_blank">idempotency</a>. What happens if we get an HTTP timeout when calling the Fan Courier HTTP API, but our shipment request was actually processed successfully, we just didn&#8217;t get the response back? When we retry, we don&#8217;t want to send a new shipment. This is why the Fan Courier Gateway needs to be an <a rel="noreferrer noopener" aria-label="Idempotent Receiver (opens in a new tab)" href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/IdempotentReceiver.html" target="_blank">Idempotent Receiver</a>. This means that it doesn&#8217;t matter if it processes the same message only once or 5 times, the result will always be the same: a single shipment request. There are <a rel="noreferrer noopener" aria-label="several ways (opens in a new tab)" href="https://lostechies.com/jimmybogard/2013/06/03/un-reliability-in-messaging-idempotency-and-de-duplication/" target="_blank">several ways</a> of <a rel="noreferrer noopener" aria-label="implementing an idempotent receiver (opens in a new tab)" href="https://blog.jonathanoliver.com/idempotency-patterns/" target="_blank">implementing an idempotent receiver</a>, but these are outside of the scope of this article.</p>



<h2 class="wp-block-heading">Timeouts</h2>



<p>But what if the Fan Courier API is down? Retrying won&#8217;t help. So what can we do? When we send the <strong>ShipWithFanCourierRequest </strong>we can also raise a timeout within 30 minutes (at line 8). When we receive the timeout message (line 13) we can take some mitigating actions. The shipping policy states that we&#8217;d like to attempt to ship with Urgent Cargus. In order to do that, we&#8217;ll want to first cancel the Fan Courier shipment (line 17). This is what&#8217;s called a <a rel="noreferrer noopener" aria-label=" compensating transaction (opens in a new tab)" href="https://docs.microsoft.com/en-us/azure/architecture/patterns/compensating-transaction" target="_blank">compensating transaction</a> because it will undo the effects of the initial transaction. Then, we&#8217;ll send a <strong>ShipWithUrgentCargusRequest</strong>. </p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: csharp; highlight: [8,13,17]; title: ; notranslate" title="">
public Task Handle(ShipOrder message, IMessageHandlerContext context)
{
	Data.OrderId = message.OrderId;
	Data.Status = ShippingStatus.ShippingWithFanCourier;

	context.Send(new ShipWithFanCourierRequest { CorrelationId = Data.OrderId });

	RequestTimeout(context, shipmentSla, new DidNotReceiveAResponseFromFanCourierTimeout());

	return Task.CompletedTask;
}

public Task Timeout(DidNotReceiveAResponseFromFanCourierTimeout state, IMessageHandlerContext context)
{
	if (Data.Status == ShippingStatus.ShippingWithFanCourier)
	{
		context.Send(new CancelFanCourierShipping { CorrelationId = Data.OrderId });
		ShipWithUrgentCargus(context);
	}

	return Task.CompletedTask;
}
</pre></div>


<h2 class="wp-block-heading">Dead Letter Channel</h2>



<p>What happens if the UrgentCargus API is down too? We can send the message to an error queue. This is an implementation of the <a rel="noreferrer noopener" aria-label="Dead Letter Channel pattern (opens in a new tab)" href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/DeadLetterChannel.html" target="_blank">Dead Letter Channel pattern</a>. A message arriving in the error queue can trigger an alert and the support team can decide what to do. And this is important: you don&#8217;t need to automate all edge cases in your business process. What&#8217;s the point in spending a sprint to automate this case, if it only happens once every two years? The costs will definitely outweigh the benefits. Instead, we can define a manual business process for handling these edge cases. </p>



<p>In our example, if Bob from IT sees a message in the error queue, he can inspect it and see that it failed with a <strong>CannotShipOrderException</strong>. In this case he can notify the Shipping department and they can use another shipment provider. But all of this happens outside of the system, so the system is less complex and easier to build.</p>



<h2 class="wp-block-heading">Saga</h2>



<p>Another failure management pattern is the <a rel="noreferrer noopener" aria-label="Saga pattern (opens in a new tab)" href="http://microservices.io/patterns/data/saga.html" target="_blank">Saga pattern</a>. Let&#8217;s see an example.</p>



<h3 class="wp-block-heading">Requirement</h3>



<p>The Product Owner would like to introduce a new feature &#8211; the ability to ship high volume orders. But there&#8217;s a catch: high volume orders are too large to ship in a single shipment. We need to split them in batches. But, we only want to ship complete orders. This means that if we cannot ship one batch, we don&#8217;t want to ship any batch.</p>



<p>The Saga pattern advocates splitting the big transaction (ship all batches) into smaller transactions (one per batch). But since these transactions are not isolated, we need to be able to compensate them: </p>



<figure class="wp-block-image"><img data-recalc-dims="1" decoding="async" width="628" height="190" src="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Saga.png?resize=628%2C190&#038;ssl=1" alt="Splitting one large transaction in multiple transactions, each with a compensating action." class="wp-image-1122" srcset="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Saga.png?w=849&amp;ssl=1 849w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Saga.png?resize=768%2C232&amp;ssl=1 768w" sizes="(max-width: 628px) 100vw, 628px"></figure>



<p>The <a rel="noreferrer noopener" aria-label="ShipHighVolumeOrderSaga  (opens in a new tab)" href="https://github.com/vchircu/LongRunningProcesses/blob/master/MyShop/MyShop.Shipping.Endpoint/ShipHighVolumeOrderSaga.cs" target="_blank">ShipHighVolumeOrderSaga</a> in the sample code base shows how to use the Saga pattern to implement this feature.</p>



<h3 class="wp-block-heading">Benefits</h3>



<h4 class="wp-block-heading">Avoids Distributed Locks</h4>



<p>By using the Saga pattern you avoid using distributed locks and <a rel="noreferrer noopener" aria-label="two phase commits (opens in a new tab)" href="https://en.wikipedia.org/wiki/Two-phase_commit_protocol" target="_blank">two-phase commits</a>. This means that you avoid the single point of failure &#8211; the distributed transaction coordinator &#8211; and it&#8217;s more performant.</p>



<h4 class="wp-block-heading">Atomic, Consistent, Durable</h4>



<p>If you implement this pattern correctly, you can get Atomicity, Consistency and Durability guarantees.

</p>



<h3 class="wp-block-heading">Drawbacks</h3>



<h4 class="wp-block-heading">Lack of Isolation</h4>



<p>The lack of isolation can cause anomalies. If between T1 and T2 you get a T4, you need to decide what to do. You can easily get into an inconsistent state.</p>



<h4 class="wp-block-heading">Complex</h4>



<p>Handling these cases and all the different orders that messages can arrive can introduce complexity.</p>



<p>If you want to learn more about the saga pattern, I also recommend <a rel="noreferrer noopener" aria-label="article  (opens in a new tab)" href="http://vasters.com/archive/Sagas.html" target="_blank">this article </a>by <a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="https://twitter.com/clemensv" target="_blank">Clemens Vasters</a> and this <a rel="noreferrer noopener" aria-label="presentation  (opens in a new tab)" href="https://www.youtube.com/watch?v=0UTOLRTwOX0" target="_blank">this presentation </a>by <a href="https://twitter.com/caitie">Caitie McCaffrey</a>.</p>



<h2 class="wp-block-heading">Conclusion</h2>



<p>In this article we&#8217;ve seen some patterns for handling failures in long running processes. We started with the easier ones: retries and delayed retries, timeouts, compensating transactions and dead letter channels. Then we&#8217;ve briefly covered a more complex pattern &#8211; the saga pattern.  I keep the saga pattern at the bottom of my toolbox and I avoid it if possible. Many times, you can get around it by using simpler patterns.</p>



<p>In this article series we&#8217;ve seen how we can use different patterns to implement long running processes. To showcase the patterns, we&#8217;ve used a sample eCommerce product that looks like this:</p>



<figure class="wp-block-image"><img decoding="async" width="3491" height="2770" src="https://i2.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/System.png?fit=628%2C399&amp;ssl=1" alt="The system" class="wp-image-1123" srcset="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/System.png?w=3491&amp;ssl=1 3491w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/System.png?resize=768%2C609&amp;ssl=1 768w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/System.png?w=1256&amp;ssl=1 1256w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/System.png?w=1884&amp;ssl=1 1884w" sizes="(max-width: 628px) 100vw, 628px"></figure>



<p>If you want to have a look at the code, you can find it on my <a href="https://github.com/vchircu/LongRunningProcesses" target="_blank" rel="noreferrer noopener" aria-label="github account (opens in a new tab)">github account</a>.  </p>
		</div>
	
</article><!-- #post-## -->

				
					<article id="post-295" class="post-295 post type-post status-publish format-standard hentry category-nservicebus tag-aggregate tag-concurrency tag-ddd tag-nhibernate tag-nservicebus tag-saga no-post-thumbnail has-read-more-tag no-sticky entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<header class="entry-header">

								<span class="cat-links" itemprop="articleSection">
				<a href="./../../category/nservicebus/index.html" rel="category tag">NServiceBus</a>			</span>
					
		<h2 class="entry-title" itemprop="headline"><a href="./../../saga-concurrency-coarse-grained-locks-nhibernate/index.html" rel="bookmark" itemprop="url">Saga concurrency and coarse-grained locks when using NHibernate Persistence</a></h2>
	</header>

	
			<div class="entry-content" itemprop="articleBody">
			<p>Recently, I stumbled upon an interesting problem related to NServiceBus Saga concurrency and coarse-grained locks when using NHibernate Persistence.</p>
<p>With NServiceBus, <a href="http://docs.particular.net/nservicebus/sagas/concurrency#concurrent-access-to-existing-saga-instances" target="_blank">concurrent access to an existing saga instance</a> works out of the box. This is because it relies on the underlying database system. With NHibernate, it relies on optimistic concurrency, by <a href="https://ayende.com/blog/3946/nhibernate-mapping-concurrency" target="_blank">adding a Version column</a> to your Saga Data. But there is a catch: NHibernate doesn&#8217;t support<a href="http://martinfowler.com/eaaCatalog/coarseGrainedLock.html" target="_blank"> Coarse-Grained Locks</a>. Let&#8217;s first explore this general problem and then we&#8217;ll get back to the NServiceBus Saga.</p>
<h3>Coarse-Grained Locks</h3>
<p>With a coarse-grained lock you basically lock a group of entities together. If you&#8217;re familiar with DDD, then you know that an aggregate should be a <a href="https://lostechies.com/jimmybogard/2010/02/04/strengthening-your-domain-a-primer/" target="_blank">consistency boundary</a>. When I save an aggregate, I want to save the <strong><em>entire</em> </strong>aggregate, to ensure it&#8217;s consistent. Why would you need this? Here&#8217;s an example:</p>
<p>Let&#8217;s take the already familiar example of an <strong>Order</strong> with <strong>OrderLines</strong>, Order being the aggregate root. We&#8217;re using optimistic concurrency control for each of our aggregate parts. In our domain there is an invariant that dictates that the <em>total number of items  in an order can&#8217;t be more than 10</em>. Two commands that would increase the quantity could be processed in parallel and break the invariant. This is because in each transaction, the invariant would hold and each transaction would commit, since they update different lines. Now you&#8217;re in an inconsistent state.</p>
<p>If we could lock the entire aggregate (order and order lines), then the second transaction would fail and rollback, maintaining a consistent state. One way to achieve this when using optimistic concurrency is to update the root&#8217;s version whenever an aggregate part is updated.</p>
<p> <a href="./../../saga-concurrency-coarse-grained-locks-nhibernate/index.html#more-295" class="more-link">Continue Reading</a></p>
		</div>
	
</article><!-- #post-## -->

				
				
	
	

			
		</main><!-- #main -->
	</section><!-- #primary -->


<div id="secondary" class="widget-area" role="complementary" aria-label="Primary Sidebar" itemscope="itemscope" itemtype="http://schema.org/WPSideBar">
	<aside id="search-4" class="widget widget_search"><form role="search" method="get" class="searchform" action=".//">
	<div>
		<input type="search" class="search-field field" placeholder="Press enter to search &hellip;" value="" name="s" title="Search for:">
	</div>
</form>
</aside>
		<aside id="recent-posts-4" class="widget widget_recent_entries">
		<h3 class="widget-title">Recent Posts</h3>
		<ul>
											<li>
					<a href="./../../how-to-identify-common-code-smells-using-the-ndepend-api/index.html">How to identify common Code Smells using the NDepend API</a>
									</li>
											<li>
					<a href="./../../interviewing-your-architecture/index.html">Interviewing your architecture</a>
									</li>
											<li>
					<a href="./../../nservicebus-an-experience-report/index.html">NServiceBus: An Experience Report</a>
									</li>
											<li>
					<a href="./../../handling-failure-in-long-running-processes/index.html">Handling Failure in Long Running Processes</a>
									</li>
											<li>
					<a href="./../../7-strategies-for-assigning-ids/index.html">7 Strategies for Assigning Ids</a>
									</li>
					</ul>

		</aside><aside id="tag_cloud-3" class="widget widget_tag_cloud"><h3 class="widget-title">Tags</h3>
<div class="tagcloud">
<a href="./../agile/index.html" class="tag-cloud-link tag-link-29 tag-link-position-1" style="font-size: 12px;">agile</a>
<a href="./../architecture/index.html" class="tag-cloud-link tag-link-33 tag-link-position-2" style="font-size: 12px;">architecture</a>
<a href="./../books/index.html" class="tag-cloud-link tag-link-14 tag-link-position-3" style="font-size: 12px;">books</a>
<a href="./../code-smells/index.html" class="tag-cloud-link tag-link-65 tag-link-position-4" style="font-size: 12px;">code smells</a>
<a href="./../ddd/index.html" class="tag-cloud-link tag-link-28 tag-link-position-5" style="font-size: 12px;">ddd</a>
<a href="./../detection-strategy/index.html" class="tag-cloud-link tag-link-67 tag-link-position-6" style="font-size: 12px;">detection strategy</a>
<a href="./../integration/index.html" class="tag-cloud-link tag-link-9 tag-link-position-7" style="font-size: 12px;">integration</a>
<a href="./../long-running-process/index.html" class="tag-cloud-link tag-link-93 tag-link-position-8" style="font-size: 12px;">long running process</a>
<a href="./../messaging/index.html" class="tag-cloud-link tag-link-10 tag-link-position-9" style="font-size: 12px;">messaging</a>
<a href="./../metrics/index.html" class="tag-cloud-link tag-link-60 tag-link-position-10" style="font-size: 12px;">metrics</a>
<a href="./../microservices/index.html" class="tag-cloud-link tag-link-87 tag-link-position-11" style="font-size: 12px;">microservices</a>
<a href="./../msmq/index.html" class="tag-cloud-link tag-link-48 tag-link-position-12" style="font-size: 12px;">msmq</a>
<a href="./../ndepend/index.html" class="tag-cloud-link tag-link-51 tag-link-position-13" style="font-size: 12px;">NDepend</a>
<a href="./../nservicebus/index.html" class="tag-cloud-link tag-link-8 tag-link-position-14" style="font-size: 12px;">NServiceBus</a>
<a href="./../quality/index.html" class="tag-cloud-link tag-link-24 tag-link-position-15" style="font-size: 12px;">quality</a>
<a href="./../security/index.html" class="tag-cloud-link tag-link-4 tag-link-position-16" style="font-size: 12px;">security</a>
<a href="./../soa/index.html" class="tag-cloud-link tag-link-37 tag-link-position-17" style="font-size: 12px;">soa</a>
<a href="./../specifications/index.html" class="tag-cloud-link tag-link-19 tag-link-position-18" style="font-size: 12px;">specifications</a>
<a href="./../testing/index.html" class="tag-cloud-link tag-link-12 tag-link-position-19" style="font-size: 12px;">testing</a>
<a href="./../visualization/index.html" class="tag-cloud-link tag-link-63 tag-link-position-20" style="font-size: 12px;">visualization</a>
</div>
</aside><aside id="archives-6" class="widget widget_archive"><h3 class="widget-title">Archives</h3>
			<ul>
					<li><a href="./../../2020/03/index.html">March 2020</a></li>
	<li><a href="./../../2020/02/index.html">February 2020</a></li>
	<li><a href="./../../2019/08/index.html">August 2019</a></li>
	<li><a href="./../../2019/07/index.html">July 2019</a></li>
	<li><a href="./../../2019/06/index.html">June 2019</a></li>
	<li><a href="./../../2019/04/index.html">April 2019</a></li>
	<li><a href="./../../2019/03/index.html">March 2019</a></li>
	<li><a href="./../../2019/02/index.html">February 2019</a></li>
	<li><a href="./../../2019/01/index.html">January 2019</a></li>
	<li><a href="./../../2018/10/index.html">October 2018</a></li>
	<li><a href="./../../2018/07/index.html">July 2018</a></li>
	<li><a href="./../../2018/06/index.html">June 2018</a></li>
	<li><a href="./../../2018/02/index.html">February 2018</a></li>
	<li><a href="./../../2017/01/index.html">January 2017</a></li>
	<li><a href="./../../2016/12/index.html">December 2016</a></li>
	<li><a href="./../../2016/11/index.html">November 2016</a></li>
	<li><a href="./../../2016/10/index.html">October 2016</a></li>
	<li><a href="./../../2016/09/index.html">September 2016</a></li>
	<li><a href="./../../2016/08/index.html">August 2016</a></li>
	<li><a href="./../../2016/07/index.html">July 2016</a></li>
	<li><a href="./../../2016/06/index.html">June 2016</a></li>
	<li><a href="./../../2016/05/index.html">May 2016</a></li>
	<li><a href="./../../2016/04/index.html">April 2016</a></li>
	<li><a href="./../../2016/03/index.html">March 2016</a></li>
			</ul>

			</aside><aside id="rss_links-3" class="widget widget_rss_links"><ul><li><a target="_self" href="./../../feed/index.html" title="Subscribe to posts">RSS - Posts</a></li></ul>
</aside><aside id="eu_cookie_law_widget-2" class="widget widget_eu_cookie_law_widget">
<div class="hide-on-button" data-hide-timeout="30" data-consent-expiration="180" id="eu-cookie-law">
	<form method="post" id="jetpack-eu-cookie-law-form">
		<input type="submit" value="Close and accept" class="accept">
	</form>

	Privacy &amp; Cookies: This site uses cookies. By continuing to use this website, you agree to their use. <br>
To find out more, including how to control cookies, see here:
		<a href="./../../privacy-policy/index.html" rel="">
		Cookie Policy	</a>
</div>
</aside>
</div>
<!-- #secondary -->
		</div>
<!-- .wide-container -->
	</div>
<!-- #content -->

	
	<footer id="colophon" class="site-footer" itemscope="itemscope" itemtype="http://schema.org/WPFooter">
		<div class="wide-container">

			<div class="site-info">
				<p class="copyright">&copy; Copyright 2024 <a href="./../../index.html">Simple Oriented Architecture</a> &middot; Designed by <a href="http://www.theme-junkie.com/">Theme Junkie</a></p>			</div>
<!-- .site-info -->

			<div class="social-links">
<a href="https://twitter.com/victorchircu/"><i class="fa fa-twitter"></i></a><a href="https://www.linkedin.com/in/victor-chircu-1519a331"><i class="fa fa-linkedin"></i></a>
</div>
		</div>
	</footer><!-- #colophon -->

</div>
<!-- #page -->

<script type="text/javascript" src="./../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b" id="syntaxhighlighter-core-js"></script>
<script type="text/javascript" src="./../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.9b" id="syntaxhighlighter-brush-csharp-js"></script>
<script type="text/javascript">(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = ".//wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = ".//wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}</script>
<script type="text/javascript" src="./../../wp-content/themes/bulan/assets/js/bulan.min.js" id="bulan-scripts-js"></script>
<script type="text/javascript" src="./../../wp-content/plugins/jetpack/_inc/build/widgets/eu-cookie-law/eu-cookie-law.min.js?ver=20180522" id="eu-cookie-law-script-js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202445.js" id="jetpack-stats-js" data-wp-strategy="defer"></script>
<script type="text/javascript" id="jetpack-stats-js-after">
/* <![CDATA[ */
_stq = window._stq || [];
_stq.push([ "view", JSON.parse("{\"v\":\"ext\",\"blog\":\"108420443\",\"post\":\"0\",\"tz\":\"0\",\"srv\":\"www.simpleorientedarchitecture.com\",\"j\":\"1:14.0\"}") ]);
_stq.push([ "clickTrackerInit", "108420443", "0" ]);
/* ]]> */
</script>

</body>
</html>