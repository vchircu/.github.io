<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="./../../xmlrpc.php">

<title>NServiceBus &#8211; Simple Oriented Architecture</title>
<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="//stats.wp.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//v0.wordpress.com">
<link rel="dns-prefetch" href="//i0.wp.com">
<link rel="alternate" type="application/rss+xml" title="Simple Oriented Architecture &raquo; Feed" href="./../../feed/index.html">
<link rel="alternate" type="application/rss+xml" title="Simple Oriented Architecture &raquo; Comments Feed" href="./../../comments/feed/index.html">
<link rel="alternate" type="application/rss+xml" title="Simple Oriented Architecture &raquo; NServiceBus Category Feed" href="./feed/index.html">
<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/svg\/","svgExt":".svg","source":{"concatemoji":".\/\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.6.2"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"ðŸ³ï¸â€âš§ï¸","ðŸ³ï¸â€‹âš§ï¸")?!1:!n(e,"ðŸ‡ºðŸ‡³","ðŸ‡ºâ€‹ðŸ‡³")&&!n(e,"ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿","ðŸ´â€‹ó §â€‹ó ¢â€‹ó ¥â€‹ó ®â€‹ó §â€‹ó ¿");case"emoji":return!n(e,"ðŸ¦â€â¬›","ðŸ¦â€‹â¬›")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<style id="wp-emoji-styles-inline-css" type="text/css">img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}</style>
<link rel="stylesheet" id="wp-block-library-css" href="./../../wp-includes/css/dist/block-library/style.min.css?ver=6.6.2" type="text/css" media="all">
<link rel="stylesheet" id="mediaelement-css" href="./../../wp-includes/js/mediaelement/mediaelementplayer-legacy.min.css?ver=4.2.17" type="text/css" media="all">
<link rel="stylesheet" id="wp-mediaelement-css" href="./../../wp-includes/js/mediaelement/wp-mediaelement.min.css?ver=6.6.2" type="text/css" media="all">
<style id="jetpack-sharing-buttons-style-inline-css" type="text/css">.jetpack-sharing-buttons__services-list{display:flex;flex-direction:row;flex-wrap:wrap;gap:0;list-style-type:none;margin:5px;padding:0}.jetpack-sharing-buttons__services-list.has-small-icon-size{font-size:12px}.jetpack-sharing-buttons__services-list.has-normal-icon-size{font-size:16px}.jetpack-sharing-buttons__services-list.has-large-icon-size{font-size:24px}.jetpack-sharing-buttons__services-list.has-huge-icon-size{font-size:36px}@media print{.jetpack-sharing-buttons__services-list{display:none!important}}.editor-styles-wrapper .wp-block-jetpack-sharing-buttons{gap:0;padding-inline-start:0}ul.jetpack-sharing-buttons__services-list.has-background{padding:1.25em 2.375em}</style>
<style id="classic-theme-styles-inline-css" type="text/css">/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}</style>
<style id="global-styles-inline-css" type="text/css">:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="bulan-plugins-style-css" href="./../../wp-content/themes/bulan/assets/css/plugins.min.css?ver=6.6.2" type="text/css" media="all">
<link rel="stylesheet" id="bulan-fonts-css" href="https://fonts.googleapis.com/css?family=Crimson+Text%3A400%2C700%2C400italic%257COswald%3A400%2C700%2C300&#038;subset=latin%2Clatin-ext&#038;ver=6.6.2" type="text/css" media="all">
<link rel="stylesheet" id="bulan-style-css" href="./../../wp-content/themes/bulan/style.min.css?ver=6.6.2" type="text/css" media="all">
<script type="text/javascript" src="./../../wp-includes/js/jquery/jquery.min.js?ver=3.7.1" id="jquery-core-js"></script>
<script type="text/javascript" src="./../../wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.1" id="jquery-migrate-js"></script>
<!--[if lte IE 9]>
<script type="text/javascript" src=".//wp-content/themes/bulan/assets/js/html5shiv.min.js" id="standard-html5-js"></script>
<![endif]-->
<link rel="https://api.w.org/" href="./../../wp-json/index.html">
<link rel="alternate" title="JSON" type="application/json" href="./../../wp-json/wp/v2/categories/38/index.html">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="./../../xmlrpc.php?rsd">
<meta name="generator" content="WordPress 6.6.2">
	<style>img#wpstats{display:none}</style>
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="website">
<meta property="og:title" content="NServiceBus &#8211; Simple Oriented Architecture">
<meta property="og:url" content="./index.html">
<meta property="og:site_name" content="Simple Oriented Architecture">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:image:alt">
<meta property="og:locale" content="en_US">
<meta name="twitter:site" content="@victorchircu">

<!-- End Jetpack Open Graph Tags -->
</head>

<body class="archive category category-nservicebus category-38 no-custom-header layout-2c-l" itemscope itemtype="http://schema.org/Blog">

<div id="page" class="site">

	<div class="search-area">
		<div class="wide-container">
			<form role="search" method="get" class="searchform" action=".//">
	<div>
		<input type="search" class="search-field field" placeholder="Press enter to search &hellip;" value="" name="s" title="Search for:">
	</div>
</form>
		</div>
	</div>

	
	<header id="masthead" class="site-header" itemscope="itemscope" itemtype="http://schema.org/WPHeader">

		<div class="site-branding">
			<div class="wide-container">
				<div id="logo">
<h1 class="site-title" itemprop="headline"><a href="./../../index.html" itemprop="url" rel="home"><span itemprop="headline">Simple Oriented Architecture</span></a></h1>
</div>
			</div>
		</div>

	</header><!-- #masthead -->

	<div id="content" class="site-content">
		<div class="wide-container">

	<section id="primary" class="content-area">
		<main id="main" class="site-main">

			
				<header class="page-header">
					<h1 class="page-title">NServiceBus</h1>				</header><!-- .page-header -->

								
					<article id="post-1143" class="post-1143 post type-post status-publish format-standard hentry category-architecture category-nservicebus tag-architecture tag-architecture-model tag-diagrams tag-messaging tag-microservices tag-neo4j tag-nservicebus no-post-thumbnail has-read-more-tag no-sticky entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<header class="entry-header">

								<span class="cat-links" itemprop="articleSection">
				<a href="./../architecture/index.html" rel="category tag">Architecture</a>, <a href="./index.html" rel="category tag">NServiceBus</a>			</span>
					
		<h2 class="entry-title" itemprop="headline"><a href="./../../interviewing-your-architecture/index.html" rel="bookmark" itemprop="url">Interviewing your architecture</a></h2>
	</header>

	
			<div class="entry-content" itemprop="articleBody">
			
<p>In this microservices era, many teams are building messaging solutions. What starts as a simple solution with 5 deployment units can quickly grow to tens or even hundreds. I have worked on such a solution for several years and experienced both the advantages and disadvantages of a Service-Oriented Architecture. We used <a href="./../../nservicebus-an-experience-report/index.html">NServiceBus </a>(part of <a href="https://particular.net/">Particular&#8217;s Service Platform</a>). </p>



<p>The solution started out simple, but, as the number of features grew, so did the complexity. With tens of message endpoints, it was hard to see both the big picture and the details. For the big picture, we could rely on some manually created diagrams (e.g. a <a href="https://c4model.com/#SystemContextDiagram">Context View</a> in <a href="https://twitter.com/simonbrown">Simon Brown&#8217;</a>s <a href="https://c4model.com/">C4 model</a>). But things got trickier when we wanted to understand the details. When I talk about details, I mean answers to specific questions. For example:</p>



<ul class="wp-block-list">
<li>What messages does endpoint X send/receive? </li>
<li>What endpoints are coupled to the X endpoint?</li>
<li>What messages are part of the Y business flow?</li>
<li>What messages is service Z sending?</li>
<li>What messages trigger message W to be sent?</li>
<li>Show me the entire message flow that starts with message W.</li>
</ul>



<p>While I was thinking about this, I saw this interesting tweet from <a href="https://twitter.com/JackKleeman">Jack Kleeman</a> that showed the communication paths between microservices at Monzo:</p>



<figure class="wp-block-embed-twitter wp-block-embed is-type-rich is-provider-twitter"><div class="wp-block-embed__wrapper">
<blockquote class="twitter-tweet" data-width="550" data-dnt="true">
<p lang="en" dir="ltr">1500 microservices at <a href="https://twitter.com/monzo?ref_src=twsrc%5Etfw">@monzo</a>; every line is an enforced network rule allowing traffic <a href="https://t.co/2r2y9f6LYO">pic.twitter.com/2r2y9f6LYO</a></p>&mdash; Jack Kleeman (@JackKleeman) <a href="https://twitter.com/JackKleeman/status/1190354757308862468?ref_src=twsrc%5Etfw">November 1, 2019</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div></figure>



<p>Now, the system I worked on was nowhere near this complex, but it made me wonder: how can you answer the questions above when working on such a system? In this blog post we&#8217;ll explore some options. To keep things simple, in this blog post we&#8217;ll use a <a href="https://github.com/vchircu/LongRunningProcesses/tree/msmq-transport">sample eCommerce solution</a> (that I&#8217;ve also used in my article series about <a href="./../../tag/long-running-process/index.html">Designing long-running processes in distributed systems</a>).</p>



 <a href="./../../interviewing-your-architecture/index.html#more-1143" class="more-link">Continue Reading</a>		</div>
	
</article><!-- #post-## -->

				
					<article id="post-1022" class="post-1022 post type-post status-publish format-standard hentry category-nservicebus tag-community tag-documentation tag-nservicebus tag-soa no-post-thumbnail has-read-more-tag no-sticky entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<header class="entry-header">

								<span class="cat-links" itemprop="articleSection">
				<a href="./index.html" rel="category tag">NServiceBus</a>			</span>
					
		<h2 class="entry-title" itemprop="headline"><a href="./../../nservicebus-an-experience-report/index.html" rel="bookmark" itemprop="url">NServiceBus: An Experience Report</a></h2>
	</header>

	
			<div class="entry-content" itemprop="articleBody">
			
<p>I&#8217;ve been working with <a rel="noreferrer noopener" aria-label="NServiceBus  (opens in a new tab)" href="https://particular.net/nservicebus" target="_blank">NServiceBus</a> (part of the <a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="https://particular.net/" target="_blank">Particular</a> platform) for the past 5 years. In all this time, I&#8217;ve always been impressed with the community around it. This article is my experience report. I&#8217;ll go over some of the highlights of working with this great piece of technology:</p>



<ul class="wp-block-list">
<li>how it helped me learn the principles of SOA</li>
<li>its developer-friendliness</li>
<li>the documentation</li>
<li>the community </li>
</ul>



 <a href="./../../nservicebus-an-experience-report/index.html#more-1022" class="more-link">Continue Reading</a>		</div>
	
</article><!-- #post-## -->

				
					<article id="post-1116" class="post-1116 post type-post status-publish format-standard hentry category-architecture category-nservicebus tag-dead-letter-channel tag-idempotent-receiver tag-integration tag-long-running-process tag-messaging tag-microservices tag-nservicebus tag-retries tag-saga tag-soa no-post-thumbnail no-read-more-tag no-sticky entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<header class="entry-header">

								<span class="cat-links" itemprop="articleSection">
				<a href="./../architecture/index.html" rel="category tag">Architecture</a>, <a href="./index.html" rel="category tag">NServiceBus</a>			</span>
					
		<h2 class="entry-title" itemprop="headline"><a href="./../../handling-failure-in-long-running-processes/index.html" rel="bookmark" itemprop="url">Handling Failure in Long Running Processes</a></h2>
	</header>

	
			<div class="entry-content" itemprop="articleBody">
			
<p>In the previous posts in this series, weâ€™ve seen <a href="./../../what-are-long-running-processes/index.html">some examples of long running processes</a>, <a href="./../../modelling-long-running-processes-choreography-versus-orchestration/index.html">how to model</a> them and where to <a rel="noreferrer noopener" aria-label="store the state (opens in a new tab)" href="./../../storing-the-state-of-a-long-running-process/index.html" target="_blank">store the state</a>. But building distributed systems is hard. And if we are aware of the <a rel="noreferrer noopener" aria-label="fallacies of distributed systems (opens in a new tab)" href="./../../8-fallacies-of-distributed-systems/index.html" target="_blank">fallacies of distributed systems</a>, then we know that things fail all the time. So how can we ensure that our long running process doesn&#8217;t get into an inconsistent state if something fails along the way? </p>



<p>Let&#8217;s see some strategies for dealing with failure in the Shipping service. First, let&#8217;s have another looks at the shipping policy defined in the <a rel="noreferrer noopener" aria-label="previous post (opens in a new tab)" href="./../../storing-the-state-of-a-long-running-process/index.html" target="_blank">previous post</a>:</p>



<ul class="wp-block-list">
<li>First, attempt to ship with Fan Courier.</li>
<li>If cannot ship with Fan Courier, attempt to ship with Urgent Cargus.</li>
<li>If we did not receive a response from Fan Courier within the agreed SLA, cancel the Fan Courier shipment and attempt to ship with Urgent Cargus.</li>
<li>If we cannot ship with Urgent Cargus or did not receive a response within the agreed SLA, notify the IT department.</li>
</ul>



<h2 class="wp-block-heading">Retries</h2>



<p>The <strong>Fan Courier Gateway</strong> handles the <strong>ShipWithFanCourierRequest </strong>message and calls the <strong>Fan Courier HTTP API</strong>. What happens if we get an Internal Server Error? </p>



<figure class="wp-block-image"><img fetchpriority="high" decoding="async" width="1902" height="503" src="https://i2.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Retries1.png?fit=628%2C308&amp;ssl=1" alt="Fan Courier HTTP API fails" class="wp-image-1118" srcset="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Retries1.png?w=1902&amp;ssl=1 1902w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Retries1.png?resize=768%2C203&amp;ssl=1 768w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Retries1.png?w=1256&amp;ssl=1 1256w" sizes="(max-width: 628px) 100vw, 628px"></figure>



<p>The simplest thing we could do would be to retry. What if it still fails? Then we can wait a bit, then retry again. For example, we can retry after 10 seconds. If it still fails, retry after 20 and so on. These <a rel="noreferrer noopener" href="https://docs.particular.net/nservicebus/recoverability/#delayed-retries" target="_blank">Delayed Retries</a> are a very useful strategy for getting over <a rel="noreferrer noopener" aria-label="transient errors (opens in a new tab)" href="https://docs.particular.net/tutorials/nservicebus-step-by-step/5-retrying-errors/#causes-of-errors-transient-exceptions" target="_blank">transient errors</a> (like a deadlock in the database). We could even increase the time between retries exponentially, using an <a href="https://en.wikipedia.org/wiki/Exponential_backoff">exponential backoff</a> strategy.</p>



<h3 class="wp-block-heading">Idempotent Receiver</h3>



<p>One thing that you need to be mindful when retrying is message <a rel="noreferrer noopener" aria-label="idempotency (opens in a new tab)" href="https://en.wikipedia.org/wiki/Idempotence" target="_blank">idempotency</a>. What happens if we get an HTTP timeout when calling the Fan Courier HTTP API, but our shipment request was actually processed successfully, we just didn&#8217;t get the response back? When we retry, we don&#8217;t want to send a new shipment. This is why the Fan Courier Gateway needs to be an <a rel="noreferrer noopener" aria-label="Idempotent Receiver (opens in a new tab)" href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/IdempotentReceiver.html" target="_blank">Idempotent Receiver</a>. This means that it doesn&#8217;t matter if it processes the same message only once or 5 times, the result will always be the same: a single shipment request. There are <a rel="noreferrer noopener" aria-label="several ways (opens in a new tab)" href="https://lostechies.com/jimmybogard/2013/06/03/un-reliability-in-messaging-idempotency-and-de-duplication/" target="_blank">several ways</a> of <a rel="noreferrer noopener" aria-label="implementing an idempotent receiver (opens in a new tab)" href="https://blog.jonathanoliver.com/idempotency-patterns/" target="_blank">implementing an idempotent receiver</a>, but these are outside of the scope of this article.</p>



<h2 class="wp-block-heading">Timeouts</h2>



<p>But what if the Fan Courier API is down? Retrying won&#8217;t help. So what can we do? When we send the <strong>ShipWithFanCourierRequest </strong>we can also raise a timeout within 30 minutes (at line 8). When we receive the timeout message (line 13) we can take some mitigating actions. The shipping policy states that we&#8217;d like to attempt to ship with Urgent Cargus. In order to do that, we&#8217;ll want to first cancel the Fan Courier shipment (line 17). This is what&#8217;s called a <a rel="noreferrer noopener" aria-label=" compensating transaction (opens in a new tab)" href="https://docs.microsoft.com/en-us/azure/architecture/patterns/compensating-transaction" target="_blank">compensating transaction</a> because it will undo the effects of the initial transaction. Then, we&#8217;ll send a <strong>ShipWithUrgentCargusRequest</strong>. </p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: csharp; highlight: [8,13,17]; title: ; notranslate" title="">
public Task Handle(ShipOrder message, IMessageHandlerContext context)
{
	Data.OrderId = message.OrderId;
	Data.Status = ShippingStatus.ShippingWithFanCourier;

	context.Send(new ShipWithFanCourierRequest { CorrelationId = Data.OrderId });

	RequestTimeout(context, shipmentSla, new DidNotReceiveAResponseFromFanCourierTimeout());

	return Task.CompletedTask;
}

public Task Timeout(DidNotReceiveAResponseFromFanCourierTimeout state, IMessageHandlerContext context)
{
	if (Data.Status == ShippingStatus.ShippingWithFanCourier)
	{
		context.Send(new CancelFanCourierShipping { CorrelationId = Data.OrderId });
		ShipWithUrgentCargus(context);
	}

	return Task.CompletedTask;
}
</pre></div>


<h2 class="wp-block-heading">Dead Letter Channel</h2>



<p>What happens if the UrgentCargus API is down too? We can send the message to an error queue. This is an implementation of the <a rel="noreferrer noopener" aria-label="Dead Letter Channel pattern (opens in a new tab)" href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/DeadLetterChannel.html" target="_blank">Dead Letter Channel pattern</a>. A message arriving in the error queue can trigger an alert and the support team can decide what to do. And this is important: you don&#8217;t need to automate all edge cases in your business process. What&#8217;s the point in spending a sprint to automate this case, if it only happens once every two years? The costs will definitely outweigh the benefits. Instead, we can define a manual business process for handling these edge cases. </p>



<p>In our example, if Bob from IT sees a message in the error queue, he can inspect it and see that it failed with a <strong>CannotShipOrderException</strong>. In this case he can notify the Shipping department and they can use another shipment provider. But all of this happens outside of the system, so the system is less complex and easier to build.</p>



<h2 class="wp-block-heading">Saga</h2>



<p>Another failure management pattern is the <a rel="noreferrer noopener" aria-label="Saga pattern (opens in a new tab)" href="http://microservices.io/patterns/data/saga.html" target="_blank">Saga pattern</a>. Let&#8217;s see an example.</p>



<h3 class="wp-block-heading">Requirement</h3>



<p>The Product Owner would like to introduce a new feature &#8211; the ability to ship high volume orders. But there&#8217;s a catch: high volume orders are too large to ship in a single shipment. We need to split them in batches. But, we only want to ship complete orders. This means that if we cannot ship one batch, we don&#8217;t want to ship any batch.</p>



<p>The Saga pattern advocates splitting the big transaction (ship all batches) into smaller transactions (one per batch). But since these transactions are not isolated, we need to be able to compensate them: </p>



<figure class="wp-block-image"><img data-recalc-dims="1" decoding="async" width="628" height="190" src="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Saga.png?resize=628%2C190&#038;ssl=1" alt="Splitting one large transaction in multiple transactions, each with a compensating action." class="wp-image-1122" srcset="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Saga.png?w=849&amp;ssl=1 849w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/Saga.png?resize=768%2C232&amp;ssl=1 768w" sizes="(max-width: 628px) 100vw, 628px"></figure>



<p>The <a rel="noreferrer noopener" aria-label="ShipHighVolumeOrderSaga  (opens in a new tab)" href="https://github.com/vchircu/LongRunningProcesses/blob/master/MyShop/MyShop.Shipping.Endpoint/ShipHighVolumeOrderSaga.cs" target="_blank">ShipHighVolumeOrderSaga</a> in the sample code base shows how to use the Saga pattern to implement this feature.</p>



<h3 class="wp-block-heading">Benefits</h3>



<h4 class="wp-block-heading">Avoids Distributed Locks</h4>



<p>By using the Saga pattern you avoid using distributed locks and <a rel="noreferrer noopener" aria-label="two phase commits (opens in a new tab)" href="https://en.wikipedia.org/wiki/Two-phase_commit_protocol" target="_blank">two-phase commits</a>. This means that you avoid the single point of failure &#8211; the distributed transaction coordinator &#8211; and it&#8217;s more performant.</p>



<h4 class="wp-block-heading">Atomic, Consistent, Durable</h4>



<p>If you implement this pattern correctly, you can get Atomicity, Consistency and Durability guarantees.

</p>



<h3 class="wp-block-heading">Drawbacks</h3>



<h4 class="wp-block-heading">Lack of Isolation</h4>



<p>The lack of isolation can cause anomalies. If between T1 and T2 you get a T4, you need to decide what to do. You can easily get into an inconsistent state.</p>



<h4 class="wp-block-heading">Complex</h4>



<p>Handling these cases and all the different orders that messages can arrive can introduce complexity.</p>



<p>If you want to learn more about the saga pattern, I also recommend <a rel="noreferrer noopener" aria-label="article  (opens in a new tab)" href="http://vasters.com/archive/Sagas.html" target="_blank">this article </a>by <a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="https://twitter.com/clemensv" target="_blank">Clemens Vasters</a> and this <a rel="noreferrer noopener" aria-label="presentation  (opens in a new tab)" href="https://www.youtube.com/watch?v=0UTOLRTwOX0" target="_blank">this presentation </a>by <a href="https://twitter.com/caitie">Caitie McCaffrey</a>.</p>



<h2 class="wp-block-heading">Conclusion</h2>



<p>In this article we&#8217;ve seen some patterns for handling failures in long running processes. We started with the easier ones: retries and delayed retries, timeouts, compensating transactions and dead letter channels. Then we&#8217;ve briefly covered a more complex pattern &#8211; the saga pattern.  I keep the saga pattern at the bottom of my toolbox and I avoid it if possible. Many times, you can get around it by using simpler patterns.</p>



<p>In this article series we&#8217;ve seen how we can use different patterns to implement long running processes. To showcase the patterns, we&#8217;ve used a sample eCommerce product that looks like this:</p>



<figure class="wp-block-image"><img decoding="async" width="3491" height="2770" src="https://i2.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/System.png?fit=628%2C399&amp;ssl=1" alt="The system" class="wp-image-1123" srcset="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/System.png?w=3491&amp;ssl=1 3491w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/System.png?resize=768%2C609&amp;ssl=1 768w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/System.png?w=1256&amp;ssl=1 1256w, https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2019/07/System.png?w=1884&amp;ssl=1 1884w" sizes="(max-width: 628px) 100vw, 628px"></figure>



<p>If you want to have a look at the code, you can find it on my <a href="https://github.com/vchircu/LongRunningProcesses" target="_blank" rel="noreferrer noopener" aria-label="github account (opens in a new tab)">github account</a>.  </p>
		</div>
	
</article><!-- #post-## -->

				
					<article id="post-907" class="post-907 post type-post status-publish format-standard hentry category-architecture category-nservicebus tag-integration tag-long-running-process tag-messaging tag-microservices tag-nservicebus tag-process-manager tag-routing-slip tag-soa no-post-thumbnail has-read-more-tag no-sticky entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<header class="entry-header">

								<span class="cat-links" itemprop="articleSection">
				<a href="./../architecture/index.html" rel="category tag">Architecture</a>, <a href="./index.html" rel="category tag">NServiceBus</a>			</span>
					
		<h2 class="entry-title" itemprop="headline"><a href="./../../storing-the-state-of-a-long-running-process/index.html" rel="bookmark" itemprop="url">Storing the state of a Long Running Process</a></h2>
	</header>

	
			<div class="entry-content" itemprop="articleBody">
			<p>In the previous two posts in this series, we&#8217;ve seen <a href="./../../what-are-long-running-processes/index.html" target="_blank" rel="noopener">some examples of long running processes</a> and <a href="./../../modelling-long-running-processes-choreography-versus-orchestration/index.html" target="_blank" rel="noopener">how to model</a> them. In this article we&#8217;ll see where to store the state of a long running process. This is an important topic when talking about long running processes because long running means stateful. We&#8217;ll discuss three patterns: storing the state in the domain entity, in the message or in a process instance.Â To better explain these patterns, we&#8217;ll implement subflows from the Order Fulfillment enterprise process.</p>
<p><img data-recalc-dims="1" loading="lazy" decoding="async" class="aligncenter size-full wp-image-863" src="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2018/06/Example_OrderFulfillment_small.jpg?resize=500%2C213" alt="Order Fulfillment" width="500" height="213"></p>
<p>You can find the code on <a href="https://github.com/vchircu/LongRunningProcesses" target="_blank" rel="noopener">my GitHub account</a>.</p>
<h2>Store the state in the Domain Entity</h2>
<p>This is probably the most used approach of the three, although it&#8217;s not the best choice in most cases. But it&#8217;s overused because it&#8217;s simple: you just store the state in the domain entity.</p>
<h3>Requirement</h3>
<p>Let&#8217;s start with what <strong>Finance</strong> needs to do when it receives the <strong>OrderPlaced</strong> event:Â charge the customer. To do that, it will integrate with a 3rd party payment provider. The long running process in this case handles two message:</p>
<ul>
<li>the <strong>OrderPlaced</strong> event &#8211; in which case it will send a <strong>ChargeCreditCardRequest</strong>
</li>
<li>the <strong>ChargeCreditCardRespone</strong>
</li>
</ul>
<h3>Implementation</h3>
<p>Since we only have two transitions, we could store the state in the Order entity.</p>
<p><img data-recalc-dims="1" loading="lazy" decoding="async" class="aligncenter size-full wp-image-927" src="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2018/07/Entities_Example_small.png?resize=600%2C326" alt="Entities Example" width="600" height="326"></p>
<p>Let&#8217;s have a look at the code. We&#8217;ll use <a href="https://particular.net/nservicebus" target="_blank" rel="noopener">NServiceBus</a>, but the code is readable even if you don&#8217;t know NServiceBus or .Net.</p>
<p> <a href="./../../storing-the-state-of-a-long-running-process/index.html#more-907" class="more-link">Continue Reading</a></p>
		</div>
	
</article><!-- #post-## -->

				
					<article id="post-873" class="post-873 post type-post status-publish format-standard hentry category-architecture category-nservicebus tag-choreography tag-integration tag-long-running-process tag-messaging tag-microservices tag-nservicebus tag-orchestration tag-soa no-post-thumbnail has-read-more-tag no-sticky entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<header class="entry-header">

								<span class="cat-links" itemprop="articleSection">
				<a href="./../architecture/index.html" rel="category tag">Architecture</a>, <a href="./index.html" rel="category tag">NServiceBus</a>			</span>
					
		<h2 class="entry-title" itemprop="headline"><a href="./../../modelling-long-running-processes-choreography-versus-orchestration/index.html" rel="bookmark" itemprop="url">Modelling Long Running Processes: Choreography versus Orchestration</a></h2>
	</header>

	
			<div class="entry-content" itemprop="articleBody">
			<p>In the <a href="./../../what-are-long-running-processes/index.html">previous article</a> we&#8217;ve seen some examples of long running processes. The purpose of this blog post is to show how to model long running processes by using choreography or orchestration.</p>
<h2>Requirement</h2>
<p>To better understand the differences between these two approaches, let&#8217;s take a long running process and implement it with both. Since we already talked about the Order Fulfillment enterprise process in the last post, let&#8217;s use that.</p>
<p><img data-recalc-dims="1" loading="lazy" decoding="async" class="aligncenter size-full wp-image-863" src="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2018/06/Example_OrderFulfillment_small.jpg?resize=500%2C213" alt="Order Fulfillment" width="500" height="213"></p>
<p>When a customer places an order, we need to approve it, charge the customer&#8217;s credit card, pack the order and ship it.</p>
<h2>Choreography</h2>
<p>Let&#8217;s first implement this requirement with choreography.Â Choreography is all about distributed decision making. When something important happens in a service (or bounded context), the service will publish an event. Other services can subscribe to that event and make decisions based on it.</p>
<p><img data-recalc-dims="1" loading="lazy" decoding="async" class="aligncenter size-full wp-image-887" src="https://i0.wp.com/www.simpleorientedarchitecture.com/wp-content/uploads/2018/06/Choreography_Generic_small.png?resize=600%2C366" alt="Choreography " width="600" height="366"></p>
<p> <a href="./../../modelling-long-running-processes-choreography-versus-orchestration/index.html#more-873" class="more-link">Continue Reading</a></p>
		</div>
	
</article><!-- #post-## -->

				
					<article id="post-797" class="post-797 post type-post status-publish format-standard hentry category-architecture category-msmq category-nservicebus tag-distributed-systems tag-microservices tag-msmq tag-nservicebus tag-soa no-post-thumbnail has-read-more-tag no-sticky entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<header class="entry-header">

								<span class="cat-links" itemprop="articleSection">
				<a href="./../architecture/index.html" rel="category tag">Architecture</a>, <a href="./../msmq/index.html" rel="category tag">MSMQ</a>, <a href="./index.html" rel="category tag">NServiceBus</a>			</span>
					
		<h2 class="entry-title" itemprop="headline"><a href="./../../8-fallacies-of-distributed-systems/index.html" rel="bookmark" itemprop="url">Understanding the 8 fallacies of Distributed Systems</a></h2>
	</header>

	
			<div class="entry-content" itemprop="articleBody">
			<p>Are you working on a distributed system? Microservices, Web APIs, SOA, web server, application server, database server, cache server, load balancer &#8211; if these describe components in your system&#8217;s design, then the answer is yes. Distributed systems are comprised of many computers that coordinate to achieve a common goal.</p>
<p>More than 20 years ago Peter Deutsch and James Gosling defined the 8 fallacies of distributed computing. These are false assumptions that many developers make about distributed systems. These are usually proven wrong in the long run, leading to hard to fix bugs.</p>
<p>The 8 fallacies are:</p>
<ol>
<li>The network is reliable</li>
<li>Latency is zero</li>
<li>Bandwidth is infinite</li>
<li>The network is secure</li>
<li>Topology doesnâ€™t change</li>
<li>There is one administrator</li>
<li>Transport cost is zero</li>
<li>The network is homogeneous</li>
</ol>
<p>Let&#8217;s go through each fallacy, discussing the problem and potential solutions.</p>
<h2>1. The network is reliable</h2>
<h3>Problem</h3>
<p><strong>Calls over a network will fail.</strong></p>
<p>Most of the systems today make calls to other systems. Are you integrating with 3rd party systems (payment gateways, accounting systems, CRMs)? Are you doing web service calls? What happens if a call fails? If you&#8217;re querying data, a simple retry will do. But what happens if you&#8217;re sending a command? Let&#8217;s take a simple example:</p>
<pre class="brush: csharp; title: ; notranslate" title="">
var creditCardProcessor = new CreditCardPaymentService();
creditCardProcessor.Charge(chargeRequest);
</pre>
<p>What happens if we receive an HTTP timeout exception? If the server did not process the request, then we can retry. But, if it did process the request, we need to make sure we are not double charging the customer. You can do this by making the server idempotent. This means that if you call it 10 times with the same charge request, the customer will be charged only once.Â If you&#8217;re not properly handling these errors, you&#8217;re system is nondeterministic. Handling all these cases can get quite complex really fast.</p>
<h3>Solutions</h3>
<p>So, if calls over a network can fail, what can we do? Well, we could <strong>automatically retry</strong>. Queuing systems are very good at this. They usually use a pattern called store and forward. They store a message locally, before forwarding it to the recipient. If the recipient is offline, the queuing system will retry sending the message. <a href="./../../msmq-basics/index.html" target="_blank" rel="noopener">MSMQ</a> is an example of such a queuing system.</p>
<p>But this change will have a big impact on the design of your system. You are moving from a request/response model to fire and forget. Since you are not waiting for a response anymore, you need to change the user journeys through your system. You cannot just replace each web service call with a queue send.</p>
<h3>Conclusion</h3>
<p>You might say that networks are more reliable these days &#8211; and they are. But stuff happens. Hardware and software can fail &#8211; power supplies, routers, failed updates or patches, weak wireless signals, network congestion, rodents or sharks. Yes, sharks:Â <a href="https://www.theguardian.com/technology/2014/aug/14/google-undersea-fibre-optic-cables-shark-attacks">Google is reinforcing undersea data cables with Kevlar after a series of shark bites</a>.</p>
<p>And there&#8217;s also the people side. People can start DDOS attacks or they can sabotage physical equipment.</p>
<p>Does this mean that you need to drop your current technology stack and use a messaging system? Probably not! You need to weigh the risk of failure with the investment that you need to make. You can minimize the chance of failure by investing in infrastructure and software. In many cases, failure is an option. But you do need to consider failure when designing distributed systems.</p>
<p> <a href="./../../8-fallacies-of-distributed-systems/index.html#more-797" class="more-link">Continue Reading</a></p>
		</div>
	
</article><!-- #post-## -->

				
					<article id="post-393" class="post-393 post type-post status-publish format-standard hentry category-msmq category-nservicebus tag-administration tag-dtc tag-monitoring tag-msmq tag-nservicebus no-post-thumbnail no-read-more-tag no-sticky entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<header class="entry-header">

								<span class="cat-links" itemprop="articleSection">
				<a href="./../msmq/index.html" rel="category tag">MSMQ</a>, <a href="./index.html" rel="category tag">NServiceBus</a>			</span>
					
		<h2 class="entry-title" itemprop="headline"><a href="./../../msmq-administration/index.html" rel="bookmark" itemprop="url">MSMQ Administration</a></h2>
	</header>

	
			<div class="entry-content" itemprop="articleBody">
			<p>In the previous blog post we went over some of the <a href="./../../msmq-basics/index.html" target="_blank" rel="noopener">MSMQ bascis</a>. In this blog post we&#8217;ll touch on how to monitor, troubleshoot and backup MSMQ.</p>
<p>I&#8217;ve been using NServiceBus with the MSMQ transport for a while now and haveÂ faced some issues. Unfortunately, information about MSMQ is pretty scarce and sometimes outdated. This blog post containsÂ links to resources that I&#8217;ve found useful for understanding some of the best practices aroundÂ MSMQ administration.</p>
<h2>Monitoring</h2>
<h3>Events</h3>
<p>MSMQ logs informational, warning andÂ errorÂ events under the <strong>Application Log</strong>. When accessing an object fails or succeeds, it alsoÂ addsÂ an audit entry in the<strong>Â Security Log</strong>. All message queuing events contain the &#8220;<em>MSMQ</em>&#8221; textÂ in the <strong>Source</strong> column.</p>
<p>If you have enabled <a href="https://technet.microsoft.com/en-us/library/cc730882(v=ws.11).aspx" target="_blank" rel="noopener">End-to-End tracing</a>, you can find theÂ trace events in <strong>Application and Services Logs/Microsoft/Windows/MSMQ/End2End</strong>.</p>
<h3>Dead-Letter Queues</h3>
<p>When a message expires, the queue manager puts it in one of the dead letter queues. This ensures that messages are not lost. A message expires when one of its timersÂ (<strong>Time-To-Reach-Queue</strong> orÂ <strong>Time-To-Be-Received</strong>) expire. There are two dead-letter queues, one for non-transactional messages and one for transactional messages. In order to keep track of expired messages, you should <a href="http://andreasohlund.net/2012/10/25/monitoring-your-dead-letter-queues/" target="_blank" rel="noopener">monitor the dead-letter queues</a>.</p>
<h3>External Transactions</h3>
<p>MSMQ can take part in external transactions. You can <a href="https://technet.microsoft.com/en-us/library/cc732032(v=ws.10).aspx" target="_blank" rel="noopener">monitor these transactions</a> by using the Distributed Transaction Coordinator Transaction Statistics and Transaction List views. Since internal transactions don&#8217;t go through MSDTC, these can&#8217;t be monitored using this approach.</p>
<h3>Performance Counters</h3>
<p>MSMQ provides <a href="https://technet.microsoft.com/en-us/library/cc771098(v=ws.10).aspx" target="_blank" rel="noopener">performance counters</a> that are helpful forÂ monitoring its performance.</p>
<p>The <strong>MSMQ Service</strong>Â performance object contains global information about the Message Queuing Service:</p>
<ul>
<li>Total bytes in all queues &#8211; This is very important, since you don&#8217;t want to run out of disk space</li>
<li>Total messages in all queues</li>
<li>MSMQ Incoming Messages</li>
<li>MSMQ Outgoing Messages</li>
<li>Incoming Messages/sec</li>
<li>Outgoing Messages/sec</li>
<li>Sessions &#8211; The total countÂ of open network sessions</li>
</ul>
<p>TheÂ <strong>MSMQ QueueÂ </strong>performance object contains counters for each individual queue. If you want to <strong>monitor theÂ Dead-Letter queues</strong>, you should selectÂ <strong>ComputerÂ Queues</strong>:</p>
<ul>
<li>Bytes in Queue</li>
<li>Messages in Queue</li>
<li>Bytes in Journal Queue</li>
<li>Messages in Journal Queue</li>
</ul>
<p>Since MSMQ is disk intensive, it is recommended to spread out MSMQ&#8217;s storage files over multiple disks.</p>
<h2>Troubleshooting</h2>
<p>The good news is that, usually, MSMQ just works. Most of the problems that you encounter are caused by either DTC or not having enough disk space.</p>
<p>For investigatingÂ DTC issues, you should use DTCPing. Here is a blog post documenting <a href="https://blogs.msdn.microsoft.com/puneetgupta/2008/11/12/troubleshooting-msdtc-issues-with-the-dtcping-tool/" target="_blank" rel="noopener">how to troubleshoot DTC issues</a>.</p>
<p>Disk space depends on the throughput of messages that flow through your system, their size, and the amount of time it takes to recover from a failure (and start processing messages again). You don&#8217;t want to start losing messages because you can&#8217;t store them on disk. You should monitor disk spaceÂ using performance counters. If there is not enough disk space, you can either <a href="https://support.microsoft.com/en-us/kb/899612" target="_blank" rel="noopener">increase the MSMQ computer quota</a>Â and maybeÂ <a href="https://blogs.msdn.microsoft.com/johnbreakwell/2009/02/09/changing-the-msmq-storage-location/" target="_blank" rel="noopener">change the MSMQ storage location</a>.</p>
<p>If you want to find out more about MSMQ troubleshooting, check out these links:</p>
<ul>
<li>As usual, <a href="https://particular.net/" target="_blank" rel="noopener">Particular Software</a> provide top notch documentation. Even if you&#8217;re not using NServiceBus, their <a href="https://docs.particular.net/nservicebus/msmq/troubleshooting" target="_blank" rel="noopener">MSMQ troubleshoot guide</a> is a must read when facing MSMQ related issues. Be sure to click onÂ the <strong>Useful Links</strong> section for further reading.</li>
<li><a href="http://www.planetgeek.ch/2014/09/02/administration-of-msmq/" target="_blank" rel="noopener">Administration of MSMQ</a></li>
<li><a href="https://blogs.msdn.microsoft.com/johnbreakwell/2008/05/07/technet-content-for-troubleshooting-msmq-on-windows-2008-and-vista/" target="_blank" rel="noopener">Technet content for troubleshooting MSMQ</a></li>
<li><a href="https://support.microsoft.com/kb/178517" target="_blank" rel="noopener">TCP ports, UDP ports, and RPC ports that are used by Message Queuing</a></li>
</ul>
<h2>Backup and Restore</h2>
<p>MSMQ comes with a command line utility &#8211; <a href="https://technet.microsoft.com/en-us/library/cc771016(v=ws.10).aspx" target="_blank" rel="noopener">mqbkup</a>Â &#8211;Â for backup and restore. Using this tool you can backup storage files, log files, transaction files, and Registry settings. I&#8217;ve also heard thatÂ <a href="http://www.cogin.com/mq/" target="_blank" rel="noopener">QueueExplorer </a>is a good tool for managing MSMQ, although I haven&#8217;t tried it yet.</p>
<h2>Conclusion</h2>
<p>In my limited experience with MSMQ, I have ran into a couple of issues. Most of them were caused by the fact that I didn&#8217;t monitor it well enough or I didn&#8217;t understand how it works under the hood. In this blog post I&#8217;ve summarized some of the best practices around MSMQ monitoring and troubleshooting. I&#8217;ll probably update this post whenever I learn something new about MSMQ.</p>
		</div>
	
</article><!-- #post-## -->

				
					<article id="post-295" class="post-295 post type-post status-publish format-standard hentry category-nservicebus tag-aggregate tag-concurrency tag-ddd tag-nhibernate tag-nservicebus tag-saga no-post-thumbnail has-read-more-tag no-sticky entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<header class="entry-header">

								<span class="cat-links" itemprop="articleSection">
				<a href="./index.html" rel="category tag">NServiceBus</a>			</span>
					
		<h2 class="entry-title" itemprop="headline"><a href="./../../saga-concurrency-coarse-grained-locks-nhibernate/index.html" rel="bookmark" itemprop="url">Saga concurrency and coarse-grained locks when using NHibernate Persistence</a></h2>
	</header>

	
			<div class="entry-content" itemprop="articleBody">
			<p>Recently, I stumbled upon an interesting problem related to NServiceBus Saga concurrency and coarse-grained locks when using NHibernate Persistence.</p>
<p>With NServiceBus,Â <a href="http://docs.particular.net/nservicebus/sagas/concurrency#concurrent-access-to-existing-saga-instances" target="_blank" rel="noopener">concurrent access to an existing saga instance</a>Â works out of the box. This is because it relies on the underlying database system. WithÂ NHibernate, it relies on optimistic concurrency, by <a href="https://ayende.com/blog/3946/nhibernate-mapping-concurrency" target="_blank" rel="noopener">adding a Version column</a> to your Saga Data. But there is a catch: NHibernate doesn&#8217;t support<a href="http://martinfowler.com/eaaCatalog/coarseGrainedLock.html" target="_blank" rel="noopener"> Coarse-Grained Locks</a>. Let&#8217;s first explore this general problem and then we&#8217;ll get back to the NServiceBus Saga.</p>
<h3>Coarse-Grained Locks</h3>
<p>With a coarse-grained lock you basically lock a group of entities together. If you&#8217;re familiar with DDD, then you know that an aggregate should be a <a href="https://lostechies.com/jimmybogard/2010/02/04/strengthening-your-domain-a-primer/" target="_blank" rel="noopener">consistency boundary</a>. When I save an aggregate, I want to save theÂ <strong><em>entire</em>Â </strong>aggregate, to ensureÂ it&#8217;s consistent. Why would you need this? Here&#8217;sÂ an example:</p>
<p>Let&#8217;s take the already familiar example of an <strong>Order</strong> with <strong>OrderLines</strong>, Order being the aggregate root. We&#8217;reÂ using optimistic concurrency control for each of our aggregate parts.Â In our domain there isÂ an invariant that dictates that the <em>total number of items Â in an order can&#8217;t be more than 10</em>. Two commands that would increase the quantity could be processed in parallel and break the invariant. This is because in each transaction, the invariant would hold and each transaction would commit, since theyÂ update differentÂ lines. Now you&#8217;re in an inconsistent state.</p>
<p>If we could lock the entire aggregate (order and order lines), then the second transaction would fail andÂ rollback, maintaining a consistent state. One way to achieve this when using optimistic concurrency is to update the root&#8217;s version whenever an aggregate part is updated.</p>
<p> <a href="./../../saga-concurrency-coarse-grained-locks-nhibernate/index.html#more-295" class="more-link">Continue Reading</a></p>
		</div>
	
</article><!-- #post-## -->

				
					<article id="post-240" class="post-240 post type-post status-publish format-standard hentry category-nservicebus tag-nservicebus tag-unit-of-work no-post-thumbnail has-read-more-tag no-sticky entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<header class="entry-header">

								<span class="cat-links" itemprop="articleSection">
				<a href="./index.html" rel="category tag">NServiceBus</a>			</span>
					
		<h2 class="entry-title" itemprop="headline"><a href="./../../managing-units-of-work-in-nservicebus/index.html" rel="bookmark" itemprop="url">Managing Units of Work in NServiceBus</a></h2>
	</header>

	
			<div class="entry-content" itemprop="articleBody">
			<p>Framework designers usually make sure there is a way to decouple infrastructure code from business code. Usually this comes in the form of hooks that you can use you to injectÂ custom code. The benefit is twofold: you don&#8217;t have duplicated code and you don&#8217;t break the <a href="http://c2.com/cgi/wiki?SingleResponsibilityPrinciple" target="_blank" rel="noopener">Single Responsibility Principle</a>. If you&#8217;re usingÂ ASP.NET Core/MVC/WebApi, then you haveÂ <strong>ActionFilters</strong>. NServiceBus has its own mechanisms that you can use. In this blog post we&#8217;ll discuss two ways of hooking into the message processing pipeline that are useful forÂ managing units of work in NServiceBus : IManageUnitsOfWork and the NServiceBus pipeline. There are many use casesÂ where these prove useful. Here are someÂ examples:</p>
<ul>
<li>Manage the unit of work (i.e. the session in NHibernate and RavenDB)</li>
<li>Logging &amp; Monitoring</li>
<li>Error Handling</li>
<li>Authorization</li>
</ul>
<p>You definitely don&#8217;t want to add theseÂ concerns toÂ your handlers.Â Here are two approaches that can help you to keepÂ the handlers clean of infrastructural concerns.</p>
<p> <a href="./../../managing-units-of-work-in-nservicebus/index.html#more-240" class="more-link">Continue Reading</a></p>
		</div>
	
</article><!-- #post-## -->

				
				
	
	

			
		</main><!-- #main -->
	</section><!-- #primary -->


<div id="secondary" class="widget-area" role="complementary" aria-label="Primary Sidebar" itemscope="itemscope" itemtype="http://schema.org/WPSideBar">
	<aside id="search-4" class="widget widget_search"><form role="search" method="get" class="searchform" action=".//">
	<div>
		<input type="search" class="search-field field" placeholder="Press enter to search &hellip;" value="" name="s" title="Search for:">
	</div>
</form>
</aside>
		<aside id="recent-posts-4" class="widget widget_recent_entries">
		<h3 class="widget-title">Recent Posts</h3>
		<ul>
											<li>
					<a href="./../../how-to-identify-common-code-smells-using-the-ndepend-api/index.html">How to identify common Code Smells using the NDepend API</a>
									</li>
											<li>
					<a href="./../../interviewing-your-architecture/index.html">Interviewing your architecture</a>
									</li>
											<li>
					<a href="./../../nservicebus-an-experience-report/index.html">NServiceBus: An Experience Report</a>
									</li>
											<li>
					<a href="./../../handling-failure-in-long-running-processes/index.html">Handling Failure in Long Running Processes</a>
									</li>
											<li>
					<a href="./../../7-strategies-for-assigning-ids/index.html">7 Strategies for Assigning Ids</a>
									</li>
					</ul>

		</aside><aside id="tag_cloud-3" class="widget widget_tag_cloud"><h3 class="widget-title">Tags</h3>
<div class="tagcloud">
<a href="./../../tag/agile/index.html" class="tag-cloud-link tag-link-29 tag-link-position-1" style="font-size: 12px;">agile</a>
<a href="./../../tag/architecture/index.html" class="tag-cloud-link tag-link-33 tag-link-position-2" style="font-size: 12px;">architecture</a>
<a href="./../../tag/books/index.html" class="tag-cloud-link tag-link-14 tag-link-position-3" style="font-size: 12px;">books</a>
<a href="./../../tag/code-smells/index.html" class="tag-cloud-link tag-link-65 tag-link-position-4" style="font-size: 12px;">code smells</a>
<a href="./../../tag/ddd/index.html" class="tag-cloud-link tag-link-28 tag-link-position-5" style="font-size: 12px;">ddd</a>
<a href="./../../tag/detection-strategy/index.html" class="tag-cloud-link tag-link-67 tag-link-position-6" style="font-size: 12px;">detection strategy</a>
<a href="./../../tag/integration/index.html" class="tag-cloud-link tag-link-9 tag-link-position-7" style="font-size: 12px;">integration</a>
<a href="./../../tag/long-running-process/index.html" class="tag-cloud-link tag-link-93 tag-link-position-8" style="font-size: 12px;">long running process</a>
<a href="./../../tag/messaging/index.html" class="tag-cloud-link tag-link-10 tag-link-position-9" style="font-size: 12px;">messaging</a>
<a href="./../../tag/metrics/index.html" class="tag-cloud-link tag-link-60 tag-link-position-10" style="font-size: 12px;">metrics</a>
<a href="./../../tag/microservices/index.html" class="tag-cloud-link tag-link-87 tag-link-position-11" style="font-size: 12px;">microservices</a>
<a href="./../../tag/msmq/index.html" class="tag-cloud-link tag-link-48 tag-link-position-12" style="font-size: 12px;">msmq</a>
<a href="./../../tag/ndepend/index.html" class="tag-cloud-link tag-link-51 tag-link-position-13" style="font-size: 12px;">NDepend</a>
<a href="./../../tag/nservicebus/index.html" class="tag-cloud-link tag-link-8 tag-link-position-14" style="font-size: 12px;">NServiceBus</a>
<a href="./../../tag/quality/index.html" class="tag-cloud-link tag-link-24 tag-link-position-15" style="font-size: 12px;">quality</a>
<a href="./../../tag/security/index.html" class="tag-cloud-link tag-link-4 tag-link-position-16" style="font-size: 12px;">security</a>
<a href="./../../tag/soa/index.html" class="tag-cloud-link tag-link-37 tag-link-position-17" style="font-size: 12px;">soa</a>
<a href="./../../tag/specifications/index.html" class="tag-cloud-link tag-link-19 tag-link-position-18" style="font-size: 12px;">specifications</a>
<a href="./../../tag/testing/index.html" class="tag-cloud-link tag-link-12 tag-link-position-19" style="font-size: 12px;">testing</a>
<a href="./../../tag/visualization/index.html" class="tag-cloud-link tag-link-63 tag-link-position-20" style="font-size: 12px;">visualization</a>
</div>
</aside><aside id="archives-6" class="widget widget_archive"><h3 class="widget-title">Archives</h3>
			<ul>
					<li><a href="./../../2020/03/index.html">March 2020</a></li>
	<li><a href="./../../2020/02/index.html">February 2020</a></li>
	<li><a href="./../../2019/08/index.html">August 2019</a></li>
	<li><a href="./../../2019/07/index.html">July 2019</a></li>
	<li><a href="./../../2019/06/index.html">June 2019</a></li>
	<li><a href="./../../2019/04/index.html">April 2019</a></li>
	<li><a href="./../../2019/03/index.html">March 2019</a></li>
	<li><a href="./../../2019/02/index.html">February 2019</a></li>
	<li><a href="./../../2019/01/index.html">January 2019</a></li>
	<li><a href="./../../2018/10/index.html">October 2018</a></li>
	<li><a href="./../../2018/07/index.html">July 2018</a></li>
	<li><a href="./../../2018/06/index.html">June 2018</a></li>
	<li><a href="./../../2018/02/index.html">February 2018</a></li>
	<li><a href="./../../2017/01/index.html">January 2017</a></li>
	<li><a href="./../../2016/12/index.html">December 2016</a></li>
	<li><a href="./../../2016/11/index.html">November 2016</a></li>
	<li><a href="./../../2016/10/index.html">October 2016</a></li>
	<li><a href="./../../2016/09/index.html">September 2016</a></li>
	<li><a href="./../../2016/08/index.html">August 2016</a></li>
	<li><a href="./../../2016/07/index.html">July 2016</a></li>
	<li><a href="./../../2016/06/index.html">June 2016</a></li>
	<li><a href="./../../2016/05/index.html">May 2016</a></li>
	<li><a href="./../../2016/04/index.html">April 2016</a></li>
	<li><a href="./../../2016/03/index.html">March 2016</a></li>
			</ul>

			</aside><aside id="rss_links-3" class="widget widget_rss_links"><ul><li><a target="_self" href="./../../feed/index.html" title="Subscribe to posts">RSS - Posts</a></li></ul>
</aside><aside id="search-2" class="widget widget_search"><form role="search" method="get" class="searchform" action=".//">
	<div>
		<input type="search" class="search-field field" placeholder="Press enter to search &hellip;" value="" name="s" title="Search for:">
	</div>
</form>
</aside>
		<aside id="recent-posts-2" class="widget widget_recent_entries">
		<h3 class="widget-title">Recent Posts</h3>
		<ul>
											<li>
					<a href="./../../how-to-identify-common-code-smells-using-the-ndepend-api/index.html">How to identify common Code Smells using the NDepend API</a>
									</li>
											<li>
					<a href="./../../interviewing-your-architecture/index.html">Interviewing your architecture</a>
									</li>
											<li>
					<a href="./../../nservicebus-an-experience-report/index.html">NServiceBus: An Experience Report</a>
									</li>
											<li>
					<a href="./../../handling-failure-in-long-running-processes/index.html">Handling Failure in Long Running Processes</a>
									</li>
											<li>
					<a href="./../../7-strategies-for-assigning-ids/index.html">7 Strategies for Assigning Ids</a>
									</li>
					</ul>

		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h3 class="widget-title">Recent Comments</h3>
<ul id="recentcomments">
<li class="recentcomments">
<span class="comment-author-link"><a href="https://codetheweb.blog/" class="url" rel="ugc external nofollow">Booligoosh</a></span> on <a href="./../../why-i-started-blogging/index.html#comment-58">Why I started blogging</a>
</li>
<li class="recentcomments">
<span class="comment-author-link"><a href="./../../index.html" class="url" rel="ugc">Victor</a></span> on <a href="./../../overview-pyramid-metrics-ndepend/index.html#comment-57">Computing the Overview Pyramid metrics with NDepend</a>
</li>
<li class="recentcomments">
<span class="comment-author-link">Geoffrey</span> on <a href="./../../overview-pyramid-metrics-ndepend/index.html#comment-56">Computing the Overview Pyramid metrics with NDepend</a>
</li>
<li class="recentcomments">
<span class="comment-author-link"><a href="./../../index.html" class="url" rel="ugc">Victor</a></span> on <a href="./../../book-review-object-oriented-metrics-in-practice/index.html#comment-55">Book Review: Object-Oriented Metrics in Practice</a>
</li>
<li class="recentcomments">
<span class="comment-author-link">pschwarz</span> on <a href="./../../book-review-object-oriented-metrics-in-practice/index.html#comment-54">Book Review: Object-Oriented Metrics in Practice</a>
</li>
</ul></aside><aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">Archives</h3>
			<ul>
					<li><a href="./../../2020/03/index.html">March 2020</a></li>
	<li><a href="./../../2020/02/index.html">February 2020</a></li>
	<li><a href="./../../2019/08/index.html">August 2019</a></li>
	<li><a href="./../../2019/07/index.html">July 2019</a></li>
	<li><a href="./../../2019/06/index.html">June 2019</a></li>
	<li><a href="./../../2019/04/index.html">April 2019</a></li>
	<li><a href="./../../2019/03/index.html">March 2019</a></li>
	<li><a href="./../../2019/02/index.html">February 2019</a></li>
	<li><a href="./../../2019/01/index.html">January 2019</a></li>
	<li><a href="./../../2018/10/index.html">October 2018</a></li>
	<li><a href="./../../2018/07/index.html">July 2018</a></li>
	<li><a href="./../../2018/06/index.html">June 2018</a></li>
	<li><a href="./../../2018/02/index.html">February 2018</a></li>
	<li><a href="./../../2017/01/index.html">January 2017</a></li>
	<li><a href="./../../2016/12/index.html">December 2016</a></li>
	<li><a href="./../../2016/11/index.html">November 2016</a></li>
	<li><a href="./../../2016/10/index.html">October 2016</a></li>
	<li><a href="./../../2016/09/index.html">September 2016</a></li>
	<li><a href="./../../2016/08/index.html">August 2016</a></li>
	<li><a href="./../../2016/07/index.html">July 2016</a></li>
	<li><a href="./../../2016/06/index.html">June 2016</a></li>
	<li><a href="./../../2016/05/index.html">May 2016</a></li>
	<li><a href="./../../2016/04/index.html">April 2016</a></li>
	<li><a href="./../../2016/03/index.html">March 2016</a></li>
			</ul>

			</aside><aside id="categories-2" class="widget widget_categories"><h3 class="widget-title">Categories</h3>
			<ul>
					<li class="cat-item cat-item-86">
<a href="./../architecture/index.html">Architecture</a>
</li>
	<li class="cat-item cat-item-2">
<a href="./../books/index.html">Books</a>
</li>
	<li class="cat-item cat-item-23">
<a href="./../clean-code/index.html">Clean Code</a>
</li>
	<li class="cat-item cat-item-49">
<a href="./../msmq/index.html">MSMQ</a>
</li>
	<li class="cat-item cat-item-38 current-cat">
<a aria-current="page" href="./index.html">NServiceBus</a>
</li>
	<li class="cat-item cat-item-103">
<a href="./../process/index.html">Process</a>
</li>
	<li class="cat-item cat-item-27">
<a href="./../quality/index.html">Quality</a>
</li>
	<li class="cat-item cat-item-90">
<a href="./../quirks/index.html">Quirks</a>
</li>
	<li class="cat-item cat-item-3">
<a href="./../security/index.html">Security</a>
</li>
	<li class="cat-item cat-item-81">
<a href="./../soft-skills/index.html">Soft Skills</a>
</li>
	<li class="cat-item cat-item-36">
<a href="./../specification-by-example/index.html">Specification by Example</a>
</li>
	<li class="cat-item cat-item-1">
<a href="./../uncategorized/index.html">Uncategorized</a>
</li>
			</ul>

			</aside><aside id="meta-2" class="widget widget_meta"><h3 class="widget-title">Meta</h3>
		<ul>
						<li><a href="./../../wp-login.php">Log in</a></li>
			<li><a href="./../../feed/index.html">Entries feed</a></li>
			<li><a href="./../../comments/feed/index.html">Comments feed</a></li>

			<li><a href="https://wordpress.org/">WordPress.org</a></li>
		</ul>

		</aside>
</div>
<!-- #secondary -->
		</div>
<!-- .wide-container -->
	</div>
<!-- #content -->

	
	<footer id="colophon" class="site-footer" itemscope="itemscope" itemtype="http://schema.org/WPFooter">
		<div class="wide-container">

			<div class="site-info">
				<p class="copyright">&copy; Copyright 2024 <a href="./../../index.html">Simple Oriented Architecture</a> &middot; Designed by <a href="http://www.theme-junkie.com/">Theme Junkie</a></p>			</div>
<!-- .site-info -->

			<div class="social-links">
<a href="https://twitter.com/victorchircu/"><i class="fa fa-twitter"></i></a><a href="https://www.linkedin.com/in/victor-chircu-1519a331"><i class="fa fa-linkedin"></i></a>
</div>
		</div>
	</footer><!-- #colophon -->

</div>
<!-- #page -->

<script type="text/javascript" src="./../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b" id="syntaxhighlighter-core-js"></script>
<script type="text/javascript" src="./../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.9b" id="syntaxhighlighter-brush-csharp-js"></script>
<script type="text/javascript">(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = ".//wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = ".//wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}</script>
<script type="text/javascript" src="./../../wp-content/themes/bulan/assets/js/bulan.min.js" id="bulan-scripts-js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202445.js" id="jetpack-stats-js" data-wp-strategy="defer"></script>
<script type="text/javascript" id="jetpack-stats-js-after">
/* <![CDATA[ */
_stq = window._stq || [];
_stq.push([ "view", JSON.parse("{\"v\":\"ext\",\"blog\":\"108420443\",\"post\":\"0\",\"tz\":\"0\",\"srv\":\"www.simpleorientedarchitecture.com\",\"j\":\"1:14.0\"}") ]);
_stq.push([ "clickTrackerInit", "108420443", "0" ]);
/* ]]> */
</script>

</body>
</html>